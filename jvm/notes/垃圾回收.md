# 垃圾回收

## 如何判断对象可以回收

### 引用计数法

给对象中添加一个引用计数器，每当有一个地方引用它时，计数器就 + 1，当引用失效时，计数器 -1 。任何时刻计数器为 0 的对象就是不再被使用的。

但是引用计数法无法解决对象之间相互循环引用问题，所以，JVM 没有采用引用计数法来管理内存

### 可达性分析算法

通过一系列称为 `GC Roots` 的对象为起始点，从这些节点开始向下搜索，搜索走过的路径就被称为`引用链`，当一个对象到 `GC Roots` 之间没有任何引用链时，则证明此对象不再被使用

![图 4](../../.image/866cd1e6ef215962b95efcd31a72cd7080e33d6a4dc160434d3481307a352ab8.png)  

并不是所有对象都可以作为 `GC Roots` 对象，只有下列对象可以作为 `GC Roots` 的对象:

- 虚拟机(栈帧中的本地变量表)中引用的对象
- 方法区中的类静态属性引用的对象
- 方法区中常量引用的对象
- 本地方法栈 JNI (即一般说的 Native 方法) 引用的对象

